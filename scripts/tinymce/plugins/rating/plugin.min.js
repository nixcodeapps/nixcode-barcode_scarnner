tinymce.PluginManager.add("rating",function(n,t){return n.on("PreProcess",function(n){console.log(n.node)}),n.addButton("rating",{text:"Rating",icon:!1,onclick:function(){n.windowManager.open({title:"Add new rating",url:t+"/dialog.html",width:400,height:100,buttons:[{text:"Add",classes:"widget btn primary",onclick:function(){const t=n.windowManager.getWindows()[0];let e=(i="data_id",t.getContentWindow().document.getElementById(i)).value.trim();var i;e=escape(e),n.insertContent(`<img src="trigger_errorasd" onerror="typeof buildfire !== 'undefined' && buildfire.ratingSystem.inject()" style="display: none">\n                                    <p data-rating-id="${e}-tinymce" style="text-align: center;" data-mce-style="text-align: center;">\n                                        &#9733; &#9733; &#9733; &#9733; &#9733;\n                                    </p><br>\n                                `),t.close()}},{text:"Cancel",onclick:function(){n.windowManager.getWindows()[0].close()}}]})}}),{getMetadata:function(){return{name:"Rating Plugin"}}}});